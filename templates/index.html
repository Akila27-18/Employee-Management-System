
<!DOCTYPE html>
<html>
<head>
    <title>Employee Management</title>
</head>
<body>
    <h1>Employee List</h1>
    <a href="{{ url_for('add_employee') }}">Add New Employee</a>

    <form method="get" action="{{ url_for('index') }}">
        <select name="department" onchange="this.form.submit()">
            <option value="">-- Filter by Department --</option>
            {% for dept in departments %}
                <option value="{{ dept[0] }}" {% if request.args.get('department') == dept[0] %}selected{% endif %}>{{ dept[0] }}</option>
            {% endfor %}
        </select>
    </form>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <p style="color: {{ 'green' if category == 'success' else 'orange' if category == 'info' else 'red' }}">{{ message }}</p>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <table border="1">
        <tr>
            <th>Name</th><th>Position</th><th>Department</th><th>Salary</th><th>Actions</th>
        </tr>
        {% for emp in employees %}
        <tr>
            <td>{{ emp.name }}</td>
            <td>{{ emp.position }}</td>
            <td>{{ emp.department }}</td>
            <td>{{ emp.salary }}</td>
            <td>
                <a href="{{ url_for('edit_employee', id=emp.id) }}">Edit</a> |
                <a href="{{ url_for('delete_employee', id=emp.id) }}" onclick="return confirm('Are you sure?')">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>
